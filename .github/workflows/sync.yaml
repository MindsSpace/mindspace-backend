name: "Sync With Organization"
# Run the workflow on push events to the main branch
# and pull requests merged into the main branch

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  git-sync:
    if: ${{ github.repository == 'https://github.com/zetsux/mindspace-be' }}
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ”’ Cencel Prev Workflow
        uses: styfle/cancel-workflow-action
      - name: ðŸ”— Synchronize Repository
        uses: wei/git-sync@v3
        with:
          source_repo: "https://robbypambudi:${{ secrets.ACCESS_TOKEN }}@github.com/zetsux/mindspace-be.git"
          source_branch: "main"
          destination_repo: "https://robbypambudi:${{ secrets.ACCESS_TOKEN }}@github.com/MindsSpace/mindspace-backend.git"
          destination_branch: "main"
